# TensorAI 智能检索系统

TensorAI是一个基于大语言模型和向量检索的智能知识库检索系统，提供多种专业领域的信息获取和处理能力。

## 系统功能

系统包含四个主要功能模块：

1. **流程制度检索**
   - 快速检索公司内部流程和制度文档
   - 支持文件预览和文档引用
   - 精确回答流程制度相关问题

2. **产品技术检索**
   - 高效查询产品功能和技术实现相关信息
   - 支持技术文档实时搜索
   - 提供API接口文档检索

3. **大模型知识检索**
   - 获取大语言模型相关知识和最新研究进展
   - 支持技术原理解析
   - 提供实践应用案例

4. **简历筛选助手**
   - 智能简历分析与人才匹配
   - 支持简历关键信息提取
   - 基于职位要求进行候选人评估
   - 集成第三方简历系统

## 项目环境配置说明

本项目支持在同一台服务器上同时运行开发环境和生产环境。

### 服务器架构

#### 生产环境
- **内网地址**: http://192.168.1.131:3000
- **公网地址**: http://123.207.100.71:5006 (通过npc隧道映射)
- **静态文件位置**: /var/www/tensorai/
- **特点**: 静态文件服务，稳定可靠

#### 开发环境
- **React开发服务器**: 127.0.0.1:3001 (仅本地访问，不要直接使用)
- **访问地址(Nginx代理)**: http://192.168.1.131:3002 (✓ 请使用此地址)
- **特点**: 支持热重载，实时预览修改

### 快速启动指南

#### 开发模式
执行以下命令启动开发服务器:
```bash
./start-dev.sh
```
然后访问 http://192.168.1.131:3002 进行开发

> **重要提示**: 请勿直接使用React开发服务器地址(3001端口)访问，因为API代理配置只在Nginx层面正确设置

#### 生产环境管理

##### 更新生产环境
当需要将最新代码部署到生产环境时，执行:
```bash
./update-prod.sh
```
更新后访问 http://123.207.100.71:5006 查看生产环境

##### 版本管理与回档
每次更新生产环境时，系统会自动创建带时间戳的构建存档，保存在`../TensorAI-builds/`目录中。

**构建历史查看**:
```bash
./list-builds.sh
```

**回档到历史版本**:
```bash
./rollback.sh
```
此脚本会显示所有可用的历史构建版本，并引导您完成回档过程。

### 服务配置说明

- **Nginx配置文件**: /etc/nginx/sites-available/tensorai.conf
- **前端API代理**: 所有 /api/* 请求均转发至后端服务(192.168.1.131:8080)
- **npc隧道**: 公网端口5006映射至内网3000端口
- **构建历史存储**: ../TensorAI-builds/ 目录

### 技术架构

```
[用户浏览器] 
     │
     ├── 访问开发环境 ──> http://192.168.1.131:3002 ──> [Nginx:3002] ──> [React开发服务器:3001]
     │                                                      │
     │                                                      ├──> /api/* ──> [后端服务器:8080]
     │
     └── 访问生产环境 ──> http://123.207.100.71:5006 ──> [npc隧道] ──> [Nginx:3000] ──> [静态文件]
                                                                          │
                                                                          └──> /api/* ──> [后端服务器:8080]
```

### 常见问题

1. **登录失败**: 确保使用正确的访问地址(3002端口)，而不是直接访问开发服务器(3001端口)
2. **开发环境与生产环境数据不一致**: 两环境共享后端API，但localStorage等数据可能不同
3. **502错误**: 检查相应环境服务是否正常运行
4. **启动开发服务器失败**: 确保端口3001未被占用
5. **退出登录后出现错误页面**: 重新访问首页或刷新页面

## 系统架构

系统由前端应用和后端API服务组成：

1. **前端 (ragflow-chat)**
   - 基于React + TypeScript开发的单页应用
   - 流式响应的实时消息展示
   - 支持多会话管理和会话历史记录
   - 响应式设计，适配多种设备

2. **后端 (Tensor-AI)**
   - 基于Spring Boot的Java后端服务
   - 提供认证、会话管理和消息处理API
   - 集成向量数据库，支持语义搜索
   - 支持流式SSE响应

## 开发指南

### 前端开发

```bash
# 安装依赖
cd ragflow-chat
npm install

# 直接启动（无代理模式）
npm run start:direct

# 或使用代理模式启动（需要CORS代理）
npm run dev
```

### 项目结构

```
ragflow-chat/          # 前端项目
  ├── public/          # 静态资源
  ├── src/             # 源代码
  │   ├── api/         # API请求封装
  │   ├── components/  # UI组件
  │   │   ├── Auth/    # 认证相关组件
  │   │   ├── Chat/    # 聊天界面组件
  │   │   ├── Common/  # 通用UI组件
  │   │   ├── Layout/  # 页面布局组件
  │   │   └── Sidebar/ # 侧边栏组件
  │   ├── context/     # React上下文管理
  │   ├── hooks/       # 自定义React Hooks
  │   ├── services/    # 服务层
  │   ├── types/       # TypeScript类型定义
  │   └── utils/       # 工具函数
  └── cors-proxy.js    # CORS代理服务器
```

## 功能特性

- 💬 流式消息响应与实时打字效果
- 📚 支持查看检索结果的参考文档
- 📝 多会话管理和历史记录保存
- 🌐 响应式设计，支持移动端和桌面端
- 🔄 实时会话同步
- 🔍 高级语义搜索
- 🧠 基于大模型的智能问答

## 技术栈

- **前端**: React, TypeScript, CSS3
- **后端**: Spring Boot, Java
- **网络**: Fetch API, Server-Sent Events (SSE)
- **存储**: LocalStorage (前端缓存)

## 使用建议

1. 在首次使用时，请使用流程制度检索功能，体验系统的基本能力
2. 产品技术检索适合开发人员查询技术文档和API信息
3. 大模型知识检索可以回答关于AI和大语言模型的专业问题
4. 简历筛选助手提供了完整的人才评估解决方案

## 系统要求

- **浏览器**: 支持现代浏览器（Chrome, Firefox, Edge, Safari）
- **网络**: 稳定的网络连接
- **后端**: 需要后端API服务正常运行

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/johnqing-424/ragflow-chat)
