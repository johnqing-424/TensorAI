# TensorAI 开发环境配置说明

TensorAI 项目支持两种模式的开发环境：标准版本（无引用）和引用版本。本文档说明如何配置和使用这两种开发环境。

## 一、配置步骤

### 1. 安装Nginx配置文件

引用版本开发环境需要额外的Nginx配置。请执行以下命令安装配置文件：

```bash
# 复制配置文件到Nginx目录
sudo cp tensorai-dev-withref.conf /etc/nginx/sites-available/

# 创建符号链接启用配置
sudo ln -s /etc/nginx/sites-available/tensorai-dev-withref.conf /etc/nginx/sites-enabled/

# 测试Nginx配置
sudo nginx -t

# 重新加载Nginx配置
sudo systemctl reload nginx
```

### 2. 启动脚本权限设置

确保开发环境启动脚本具有执行权限：

```bash
chmod +x start-dev.sh
chmod +x start-dev-withref.sh
```

## 二、使用说明

### 1. 标准版本开发环境（无引用）

```bash
# 切换到标准版本分支
git checkout noref

# 启动标准版本开发环境
./start-dev.sh

# 访问地址：http://192.168.1.131:3002
```

### 2. 引用版本开发环境

```bash
# 切换到引用版本分支
git checkout withref

# 启动引用版本开发环境
./start-dev-withref.sh

# 访问地址：http://192.168.1.131:3004
```

## 三、开发流程

1. 根据需要选择合适的分支（noref 或 withref）
2. 启动对应的开发环境
3. 进行代码修改
4. 使用对应的更新脚本部署到生产环境：
   - 标准版本：`./update-prod.sh`
   - 引用版本：`./update-prod-withref.sh`

## 四、端口映射说明

| 环境 | 版本 | 访问地址 | 实际服务端口 |
|------|------|----------|------------|
| 开发 | 标准版本 | http://192.168.1.131:3002 | 3001 (React Dev Server) |
| 开发 | 引用版本 | http://192.168.1.131:3004 | 3005 (React Dev Server) |
| 生产 | 标准版本 | http://123.207.100.71:5006 | 3000 (Nginx) |
| 生产 | 引用版本 | http://192.168.1.131:3003 | 3003 (Nginx) |

## 五、注意事项

1. 请始终通过Nginx代理地址访问应用（3002或3004端口），而不是直接访问React开发服务器（3001或3005端口）
2. 切换分支时，请确保当前工作区没有未提交的更改
3. 如遇端口冲突，请检查是否有其他服务占用了相应端口 